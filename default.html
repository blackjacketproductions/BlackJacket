<!doctype html>
<html lang="en">
<head>
    <title>Harness Test</title>
    <meta charset="utf-8" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="scripts/main.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.3.0/build/cssreset/reset-min.css">
    <link rel="stylesheet" href="css/fbStyles.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<script type="text/javascript">

    $(document).ready(function() {

        //hide 2nd section
        $("#sbcImageEditor").hide();
        $("#sbcPhotoSelector").hide();

        $("#sourceFb").click(function(){
            $("#sbcPhotoSelector").show("slow");
            $("#sbcImageSource .storyBoardContent").hide();
        });

        $("#sourcePc").click(function(){
            $("#sbcImageEditor").show("slow");
            $("#sbcImageSource .storyBoardContent").hide();
        });
    });

</script>

<div class="appBody">
    <div id="topBar" class="baseContent">    
        Test
    </div>
    <div id="sbcImageSource" class="baseContent">
        <h3>Where is your image coming from?</h3>
        <div class="storyBoardContent">
            <img id="sourceFb" class="bigTile" src="images/fb_logo.png" title="Select from Facebook" />
            <img id="sourcePc" class="bigTile" src="images/pc_logo.png" title="Select from My Computer" />
        </div>
    </div>

    <div id="sbcPhotoSelector" class="baseContent">
        <h3>Find a photo</h3>
        <div class="storyBoardContent">
            Content
        </div>
    </div>

    <div id="sbcImageEditor" class="baseContent">
        <canvas width="760" height="600" id="demotivationalcanvas">

        </canvas>
        <form>
            <p>
                <label for="posterTitleTextBox">Title:</label>
                <input id="posterTitleTextBox" type="text" value="Hairy Nuts">
            </p>

            <p>
                <label for="posterWittyCommentTextBox">Witty Comment:</label>
                <input id="posterWittyCommentTextBox" type="text" value="I like them this much!!">
            </p>

            <p>
                <input type="button" id="previewButton" value="Preview">
            </p>
        </form>
    </div>
</div>

<input type="file" id="files" name="files[]" multiple />
<output id="list"></output>

<script>
    function handleFileSelect(evt) {
        var files = evt.target.files; // FileList object
        handleFiles(files);
        // files is a FileList of File objects. List some properties.
        var output = [];
        for (var i = 0, f; f = files[i]; i++) {
            output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
                    f.size, ' bytes, last modified: ',
                    f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',

                    '</li>');
        }
        document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
    }

    document.getElementById('files').addEventListener('change', handleFileSelect, false);

    function handleFiles(files) {
        for (var i = 0; i < files.length; i++) {
            var file = files[i];
            var imageType = /image.*/;

            if (!file.type.match(imageType)) {
                continue;
            }

            var preview = document.createElement("div");
            var img = document.createElement("img");
            img.classList.add("obj");
            img.file = file;
            preview.appendChild(img);

            var reader = new FileReader();
            reader.onload = (function(aImg) { return function(e) { aImg.src = e.target.result; }; })(img);
            reader.readAsDataURL(file);
        }
    }
</script>

</body>
</html>
